<div id="content">
  <wt-shuyai *ngIf="cargando || conectar"></wt-shuyai>
  <sa-widgets-grid>
    <div class="row">
      <article class="col-xs-12">
        <sa-widget id="wid-mi-li-0" [editbutton]="false" [colorbutton]="false" [togglebutton]="false"
          [deletebutton]="false" [fullscreenbutton]="false" [custombutton]="false" [collapsed]="false"
          [sortable]="false">
          <header>
            <h2>
              <strong>Lista de datos</strong>
            </h2>
          </header>
          <div class="widget-body">
            <div class="text-center">
              <div class="pull-left header-button">
                <a class="btn btn-primary" (click)="opene()">Prestamo Estudiantes</a>
              </div>
              <div class="pull-left header-button">
                  <a class="btn btn-primary" (click)="opend()">Prestamo Docentes</a>
                </div>
              <h3>Aplicaciones</h3>
            </div>
            <div *ngIf="!cargando">
              <table paginationLength="10"  fbg-datatable [options]="{ order: [[ 1, 'desc' ]]}" pdf="Reporte" 
              class="table table-stripped table-hover">
                <thead>
                  <tr>
                    <th class="acciones">Acciones</th>
                    <th>Prestamo</th>
                    <th>Fecha</th>
                    <th>Activos</th>
                    <th>persona</th>
                    <th>Espacio</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let s of parametros; let i = index">
                    <td>
                      <a placement="top" tooltip="Editar Fila" class="fa fa-pencil fa-lg" (click)="getFila(s)"></a>
                    </td>
                    <td>{{s.id_regpres}}</td>
                    <td>{{getCast(s.hora_inicio_hrapr) | date : 'dd/MM/yyyy HH:mm'}}</td>
                    <td>{{ getNactivos(s.id_activos)}}</td>

                    <td>{{ getNpersona(s.id_persona)}} {{ getNdocentes(s.id_docente)}}</td>
                    <td>{{ getNespacios(s.id_ubicacion)}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </sa-widget>
      </article>
    </div>
  </sa-widgets-grid>
  
  <div id="anio" bsModal #mdregPrestamoeEstudiante="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"
  [config]="{backdrop: 'static',  keyboard: false}">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" (click)="cancelar()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">{{regPrestamo.id_regpres ? 'Editar registro' : 'Nuevo registro'}} </h4>
      </div>
      <div class="modal-body">
        <wt-shuyai *ngIf="cargando"></wt-shuyai>
        <div class="row">
          <div class="col-lg-12">
            <form id="frmLugar" #form [saBootstrapValidator]="getValidators()" novalidate="novalidate"
              (submitEvent)="saveValidar($event)" class="form-horizontal">

              <div class=" col-xs-12">
                <fieldset>
                  <label class="col-lg-4 control-label">
                    <b>Seleccione Articulo de prestamo:
                      <b class="text-danger"> *</b>
                    </b>
                  </label>
                  <div class="col-lg-8">
                    <select class="select-menu" type="select"  name="id_activos" [(ngModel)]="regPrestamo.id_activos" class="form-control"
                      id="id_activos" required>
                      <option *ngFor="let c of activo" [ngValue]="c.id_activos">{{c.nombre}}</option>
                    </select>
                  </div>
                </fieldset>
               
                <fieldset>
                  <label class="col-lg-4 control-label">
                    <b>Seleccione Ubicacion de prestamo:
                      <b class="text-danger"> *</b>
                    </b>
                  </label>
                  <div class="col-lg-8">
                    <select class="select-menu" name="selectubicacione" [(ngModel)]="regPrestamo.id_ubicacion"class=" form-control" 
                      id="id_ubicacion" required>
                      <option *ngFor="let c of espacios" [ngValue]="c.id_ubicacion_esp">{{c.nombre}}</option>
                    </select>
                  </div>
                </fieldset>
               
                
                <fieldset>
                    <label for="">Ingrese Su cedula para realizar prestamo:</label>
                    <input  id="id_persona-reg" type="text"  [(ngModel)]="regPrestamo.id_persona"  class="form-control" name="id_per_reg" required
                    class="col-lg-1" type="text"
                    value="{{enviarid(selected)}}" 
                    disabled style="background-color:white; border-color:white" >          
                        
                    <div class="">
                          <input class="typeahead" name="typeestudiante" [(ngModel)]="selected"
                         [typeahead]="personas"
                      typeaheadOptionField="documento"
                      (typeaheadNoResults)="typeaheadNoResults($event)" class="form-control">
                      <pre class="card card-block card-header mb-3" name="evalu"
                         >{{datospersona(selected)}}</pre>  
                      </div>
                   </fieldset>

                <fieldset>
              
                  <div class="form-group">
                    <label class="col-lg-4"><b>Fecha de prestamo:<label class="text-danger"></label></b>
                    </label>
                    <div class="col-lg-8">
                      <div class="input-group">
                        <input id="fecha" type="text" placeholder="{{curDate | date:'yyyy-MM-dd'}}"
                          class="form-control datepicker disabled" (valueUpdated)="setFecha($event)" name="fecha"
                          [value]="regPrestamo.hora_inicio_hrapr | date: 'dd/MM/yyyy'" icon="true" required
                          [saUiDatepicker]="{
                                    dateFormat: 'dd/mm/yy'}" notActualDate="true">
                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                        <input class="form-control disabled clockpicker" smartClockpicker type="text"
                          (valueUpdated)="setHora($event)" [value]="regPrestamo.hora_inicio_hrapr | date: 'HH:mm'"
                          placeholder="Hora" name="hora" icon="true" required>
                        <span class="input-group-addon time"><i class="fa fa-clock-o"></i></span>
                      </div>
                    </div>
                  </div>
                </fieldset>
                <fieldset>
                <div class="form-actions">
                  <div class="pull-left">
                    <div class="col-md-12">
                      <button class="btn btn-primary" type="submit">
                        Guardar
                      </button>
                      <button class="btn btn-danger" type="button" (click)="cancelar()">
                        Cancelar
                      </button>
                    </div>
                  </div>
                  <div style="clear:both"></div>
                </div>
              </fieldset>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!--
  ////////////////////////////////////////ModalDocnetes ////////////////////////////////////////////777
-->



<div id="anio" bsModal #mdregPrestamoDocente="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"
[config]="{backdrop: 'static',  keyboard: false}">
<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" (click)="cancelard()" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
      <h4 class="modal-title">{{regPrestamo.id_regpres ? 'Editar registro' : 'Nuevo registro'}} </h4>
    </div>
    <div class="modal-body">
      <wt-shuyai *ngIf="cargando"></wt-shuyai>
      <div class="row">
        <div class="col-lg-12">
          <form id="frmLugar" #form [saBootstrapValidator]="getValidators()" novalidate="novalidate"
            (submitEvent)="saveValidar($event)" class="form-horizontal">

            <div class=" col-xs-12">
              <fieldset>
                <label class="col-lg-4 control-label">
                  <b>Seleccione Articulo de prestamo:
                    <b class="text-danger"> *</b>
                  </b>
                </label>
                <div class="col-lg-8">
                  <select class="select-menu" type="select"  name="id_activos" [(ngModel)]="regPrestamo.id_activos" class="form-control"
                    id="id_activos" required>
                    <option *ngFor="let c of activo" [ngValue]="c.id_activos">{{c.nombre}}</option>
                  </select>
                </div>
              </fieldset>
             
              <fieldset>
                <label class="col-lg-4 control-label">
                  <b>Seleccione Ubicacion de prestamo:
                    <b class="text-danger"> *</b>
                  </b>
                </label>
                <div class="col-lg-8">
                  <select class="select-menu" name="selectubicacione" [(ngModel)]="regPrestamo.id_ubicacion"class=" form-control" 
                    id="id_ubicacion" required>
                    <option *ngFor="let c of espacios" [ngValue]="c.id_ubicacion_esp">{{c.nombre}}</option>
                  </select>
                </div>
              </fieldset>
             
              
              <fieldset>
                  <label for="">Ingrese Su cedula para realizar prestamo:</label>
                  <input  id="id_persona-reg" type="text"  [(ngModel)]="regPrestamo.id_docente"  class="form-control" name="id_per_reg" required
                  class="col-lg-1" type="text"
                  value="{{enviariddocente(selected)}}" 
                  disabled style="background-color:white; border-color:white" >          
                      
                  <div class="">
                        <input class="typeahead" name="typeestudiante" [(ngModel)]="selected"
                       [typeahead]="docente"
                    typeaheadOptionField="documento_doc"
                    (typeaheadNoResults)="typeaheadNoResults($event)" class="form-control">
                    <pre class="card card-block card-header mb-3" name="evalu"
                       >{{datosdocente(selected)}}</pre>  
                    </div>
                 </fieldset>


              <fieldset>
             
                <div class="form-group">
                  <label class="col-lg-4"><b>Fecha de prestamo:<label class="text-danger"></label></b>
                  </label>
                  <div class="col-lg-8">
                    <div class="input-group">
                      <input id="fecha" type="text" placeholder="{{curDate | date:'yyyy-MM-dd'}}"
                        class="form-control datepicker disabled" (valueUpdated)="setFecha($event)" name="fecha"
                        [value]="regPrestamo.hora_inicio_hrapr | date: 'dd/MM/yyyy'" icon="true" required
                        [saUiDatepicker]="{
                                  dateFormat: 'dd/mm/yy'}" notActualDate="true">
                      <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                      <input class="form-control disabled clockpicker" smartClockpicker type="text"
                        (valueUpdated)="setHora($event)" [value]="regPrestamo.hora_inicio_hrapr | date: 'HH:mm'"
                        placeholder="Hora" name="hora" icon="true" required>
                      <span class="input-group-addon time"><i class="fa fa-clock-o"></i></span>
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset>
              <div class="form-actions">
                <div class="pull-left">
                  <div class="col-md-12">
                    <button class="btn btn-primary" type="submit">
                      Guardar
                    </button>
                    <button class="btn btn-danger" type="button" (click)="cancelar()">
                      Cancelar
                    </button>
                  </div>
                </div>
                <div style="clear:both"></div>
              </div>
            </fieldset>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
</div>

